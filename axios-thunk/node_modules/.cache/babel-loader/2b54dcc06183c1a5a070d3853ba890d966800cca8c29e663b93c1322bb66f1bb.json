{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { instance } from \"../../App\";\n\n// 비동기 ActionCreate는 만들어줘야 합니다. // ActionCreate 1개당 extraReducers 3개 만들어줘야 해요(pending, fulfilled, rejected) 프로미스죠 // 100% 성공보정이 되지 않기 때문에 \nconst __getTodosThunk = createAsyncThunk(\"getTodosThunk\", async (_, thunkAPI) => {\n  try {\n    const res = await instance.get(\"/todos\");\n    return thunkAPI.fulfillWithValue(res.data);\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error);\n  }\n});\nconst __poseTodosThunk = createAsyncThunk(\"postTodosThunk\", async (payload, thunkAPI) => {\n  try {\n    const res = await instance.post(\"/todos\", payload); // (1) 서버 업데이트 \n    return thunkAPI.fulfillWithValue(res.data);\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error);\n  }\n});\nconst __deleteTodosThunk = createAsyncThunk(\"deleteTodosThunk\", async (payload, thunkAPI) => {\n  try {\n    const res = await instance.post(`/todos/${payload}`); // (1) 서버 업데이트 \n    return thunkAPI.fulfillWithValue(res.data);\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error);\n  }\n});\nconst todoSlice = createSlice({\n  name: \"todoSlice\",\n  initialState: {\n    todos: [],\n    isLoading: false,\n    isError: false\n  },\n  extraReducers: builder => {\n    builder\n    // __getTodosThunk\n    .addCase(__getTodosThunk.pending, state => {\n      state.isLoading = true;\n      state.isError = false;\n    }).addCase(__getTodosThunk.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isError = false;\n      state.todos = [...action.payload];\n    }).addCase(__getTodosThunk.rejected, state => {\n      state.isLoading = true;\n      state.isError = false;\n    })\n\n    //__poseTodosThunk\n    .addCase(__poseTodosThunk.pending, state => {\n      state.isLoading = true;\n      state.isError = false;\n    }).addCase(__poseTodosThunk.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isError = false;\n      state.todos = [...state.todos, action.payload]; // (2) 리렌더링 발생시키기 \n    }).addCase(__poseTodosThunk.rejected, state => {\n      state.isLoading = true;\n      state.isError = false;\n    })\n\n    // __deleteTodosThunk\n    .addCase(__deleteTodosThunk.pending, state => {\n      state.isLoading = true;\n      state.isError = false;\n    }).addCase(__deleteTodosThunk.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isError = false;\n      state.todos = [...state.todos, action.payload]; // (2) 리렌더링 발생시키기 \n    }).addCase(__deleteTodosThunk.rejected, state => {\n      state.isLoading = true;\n      state.isError = false;\n    });\n  }\n});\nexport default todoSlice.reducer;\nexport const selecttodoSlice = state => state.todoSlice;\nexport { __getTodosThunk, __poseTodosThunk };","map":{"version":3,"names":["createAsyncThunk","createSlice","instance","__getTodosThunk","_","thunkAPI","res","get","fulfillWithValue","data","error","rejectWithValue","__poseTodosThunk","payload","post","__deleteTodosThunk","todoSlice","name","initialState","todos","isLoading","isError","extraReducers","builder","addCase","pending","state","fulfilled","action","rejected","reducer","selecttodoSlice"],"sources":["/Users/edwin.youngchan.park/Documents/sparta/inocamp/03주특기/InocamReactPrec/axios-thunk/src/redux/modules/todoSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { instance } from \"../../App\";\n\n\n// 비동기 ActionCreate는 만들어줘야 합니다. // ActionCreate 1개당 extraReducers 3개 만들어줘야 해요(pending, fulfilled, rejected) 프로미스죠 // 100% 성공보정이 되지 않기 때문에 \nconst __getTodosThunk = createAsyncThunk(\n  \"getTodosThunk\",\n  async (_, thunkAPI) => {\n   try {\n    const res = await instance.get(\"/todos\");\n    return thunkAPI.fulfillWithValue(res.data)\n   } catch (error) {\n    return thunkAPI.rejectWithValue(error)\n   }\n  }\n)\n\nconst __poseTodosThunk = createAsyncThunk(\n  \"postTodosThunk\",\n  async (payload, thunkAPI) => {\n   try {\n    const res = await instance.post(\"/todos\", payload); // (1) 서버 업데이트 \n    return thunkAPI.fulfillWithValue(res.data)\n   } catch (error) {\n    return thunkAPI.rejectWithValue(error)\n   }\n  }\n)\n\nconst __deleteTodosThunk = createAsyncThunk(\n  \"deleteTodosThunk\",\n  async (payload, thunkAPI) => {\n   try {\n    const res = await instance.post(`/todos/${payload}`); // (1) 서버 업데이트 \n    return thunkAPI.fulfillWithValue(res.data)\n   } catch (error) {\n    return thunkAPI.rejectWithValue(error)\n   }\n  }\n)\n\nconst todoSlice = createSlice({\n  name:\"todoSlice\",\n  initialState: {\n    todos : [],\n    isLoading:false,\n    isError:false\n  },\n  extraReducers: builder => {\n    builder\n    // __getTodosThunk\n    .addCase(__getTodosThunk.pending, (state) => {\n      state.isLoading = true;\n      state.isError = false;\n    })\n    .addCase(__getTodosThunk.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isError = false;\n      state.todos = [...action.payload]\n    })\n    .addCase(__getTodosThunk.rejected, (state) => {\n      state.isLoading = true;\n      state.isError = false;\n    })\n\n    //__poseTodosThunk\n    .addCase(__poseTodosThunk.pending, (state) => {\n      state.isLoading = true;\n      state.isError = false;\n    })\n    .addCase(__poseTodosThunk.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isError = false;\n      state.todos = [...state.todos, action.payload] // (2) 리렌더링 발생시키기 \n    })\n    .addCase(__poseTodosThunk.rejected, (state) => {\n      state.isLoading = true;\n      state.isError = false;\n    })\n\n    // __deleteTodosThunk\n    .addCase(__deleteTodosThunk.pending, (state) => {\n      state.isLoading = true;\n      state.isError = false;\n    })\n    .addCase(__deleteTodosThunk.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isError = false;\n      state.todos = [...state.todos, action.payload] // (2) 리렌더링 발생시키기 \n    })\n    .addCase(__deleteTodosThunk.rejected, (state) => {\n      state.isLoading = true;\n      state.isError = false;\n    })\n\n  }\n})\n\nexport default todoSlice.reducer\nexport const selecttodoSlice = (state) => state.todoSlice\nexport {__getTodosThunk, __poseTodosThunk}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}