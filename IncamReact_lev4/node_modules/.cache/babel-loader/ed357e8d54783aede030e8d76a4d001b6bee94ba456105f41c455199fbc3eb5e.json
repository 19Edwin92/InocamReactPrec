{"ast":null,"code":"import { createApi } from '@reduxjs/toolkit/query/react';\nimport { instance } from './instance';\nconst axiosBaseQuery = () => async _ref => {\n  let {\n    url,\n    method,\n    data,\n    types\n  } = _ref;\n  setTimeout(() => {}, 5000);\n  // try {\n  //   const res = await instance({method,url,data})\n  //   if (types && types.type === \"comment\" ) {\n  //     return {data:res.data.filter(todo => todo.Todoid === types.id)}\n  //   } return {data:res.data}\n  // } catch (error) {\n  //   return console.log(\"에러\", error);\n  // }\n};\n\nconst todortkquery = createApi({\n  baseQuery: axiosBaseQuery(),\n  tagTypes: [\"TODOS\", \"COMMENT\"],\n  endpoints: builder => ({\n    getTodoRTK: builder.query({\n      query: () => ({\n        url: \"/todos\",\n        method: \"get\"\n      }),\n      providesTags: ['TODOS']\n    }),\n    postTodoRTK: builder.mutation({\n      query: payload => ({\n        url: \"/todos\",\n        method: \"post\",\n        data: payload\n      }),\n      invalidatesTags: ['TODOS']\n    }),\n    deleteTodoRTK: builder.mutation({\n      query: payload => ({\n        url: `/todos/${payload}`,\n        method: \"delete\"\n      }),\n      invalidatesTags: ['TODOS']\n    }),\n    updateTodoRTK: builder.mutation({\n      query: payload => {\n        console.log(payload.content);\n        return {\n          url: `/todos/${payload.id}`,\n          method: \"patch\",\n          data: {\n            content: payload.content\n          }\n        };\n      },\n      invalidatesTags: ['TODOS']\n    }),\n    // 댓글관련 부분 \n    getCommentRTK: builder.query({\n      query: payload => ({\n        url: `/comments`,\n        method: \"get\",\n        types: {\n          type: \"comment\",\n          id: payload\n        }\n      }),\n      providesTags: (result, error, arg) => {\n        console.log(\"getCommentRTK\", result, error, arg);\n        return [{\n          type: 'COMMENT',\n          id: arg\n        }];\n      }\n    }),\n    postTodoCommentRTK: builder.mutation({\n      query: payload => {\n        console.log(payload);\n        return {\n          url: `/comments`,\n          method: \"post\",\n          data: payload\n        };\n      },\n      invalidatesTags: (result, error, arg) => {\n        console.log(\"postTodoCommentRTK\", result, error, arg.Todoid);\n        return [{\n          type: 'COMMENT',\n          id: arg.Todoid\n        }];\n      }\n    }),\n    // 상세페이지에서의 조회\n    getFindTodoRTK: builder.query({\n      query: id => ({\n        url: `/todos/${id}`,\n        method: \"get\"\n      }),\n      providesTags: (result, error, arg) => [{\n        type: 'COMMENT',\n        id: arg\n      }]\n    })\n  })\n});\nexport const {\n  useGetTodoRTKQuery,\n  usePostTodoRTKMutation,\n  useDeleteTodoRTKMutation,\n  useUpdateTodoRTKMutation,\n  useGetFindTodoRTKQuery,\n  useGetCommentRTKQuery,\n  usePostTodoCommentRTKMutation\n} = todortkquery;\nexport default todortkquery;","map":{"version":3,"names":["createApi","instance","axiosBaseQuery","_ref","url","method","data","types","setTimeout","todortkquery","baseQuery","tagTypes","endpoints","builder","getTodoRTK","query","providesTags","postTodoRTK","mutation","payload","invalidatesTags","deleteTodoRTK","updateTodoRTK","console","log","content","id","getCommentRTK","type","result","error","arg","postTodoCommentRTK","Todoid","getFindTodoRTK","useGetTodoRTKQuery","usePostTodoRTKMutation","useDeleteTodoRTKMutation","useUpdateTodoRTKMutation","useGetFindTodoRTKQuery","useGetCommentRTKQuery","usePostTodoCommentRTKMutation"],"sources":["/Users/edwin.youngchan.park/Documents/sparta/inocamp/03주특기/InocamReactPrec/IncamReact_lev4/src/redux/api/todortkquery.js"],"sourcesContent":["import { createApi } from '@reduxjs/toolkit/query/react'\nimport { instance } from './instance';\n\nconst axiosBaseQuery = () => async ({url, method, data, types}) => {\n  setTimeout(() => {}, 5000)\n  // try {\n  //   const res = await instance({method,url,data})\n  //   if (types && types.type === \"comment\" ) {\n  //     return {data:res.data.filter(todo => todo.Todoid === types.id)}\n  //   } return {data:res.data}\n  // } catch (error) {\n  //   return console.log(\"에러\", error);\n  // }\n}\n\nconst todortkquery = createApi({\n  baseQuery : axiosBaseQuery(),\n  tagTypes: [\"TODOS\", \"COMMENT\"],\n  endpoints : builder => ({\n    getTodoRTK : builder.query({\n      query: () => ({url:\"/todos\", method:\"get\"}),\n      providesTags: ['TODOS'],\n    }),\n    postTodoRTK : builder.mutation({\n      query: (payload) => ({url:\"/todos\", method:\"post\", data:payload}),\n      invalidatesTags: ['TODOS']\n    }),\n    deleteTodoRTK : builder.mutation({\n      query: (payload) => ({url:`/todos/${payload}`, method:\"delete\"}),\n      invalidatesTags: ['TODOS']\n    }),\n    updateTodoRTK : builder.mutation({\n      query: (payload) => {\n        console.log(payload.content);\n        return ({url:`/todos/${payload.id}`, method:\"patch\", data:{content:payload.content}})\n      },\n      invalidatesTags: ['TODOS']\n    }),\n\n    // 댓글관련 부분 \n    getCommentRTK : builder.query({\n      query: (payload) => ({url:`/comments`, method:\"get\", types:{type:\"comment\", id:payload}}),\n      providesTags: (result, error, arg) => {\n        console.log(\"getCommentRTK\", result, error, arg);\n        return [{type:'COMMENT', id:arg}]\n      }\n    }),\n\n    postTodoCommentRTK : builder.mutation({\n      query: (payload) => {\n        console.log(payload);\n        return ({url:`/comments`, method:\"post\", data:payload})\n      },\n      invalidatesTags : (result, error, arg) => {\n        console.log(\"postTodoCommentRTK\", result, error, arg.Todoid);\n        return [{type:'COMMENT', id:arg.Todoid}]\n      }\n    }),\n\n    // 상세페이지에서의 조회\n    getFindTodoRTK : builder.query({\n      query: (id) => ({url:`/todos/${id}`, method:\"get\"}),\n      providesTags: (result, error, arg) => [{type:'COMMENT', id:arg}]\n    }),\n  })\n})\n\nexport const {useGetTodoRTKQuery, usePostTodoRTKMutation, useDeleteTodoRTKMutation, useUpdateTodoRTKMutation, useGetFindTodoRTKQuery, useGetCommentRTKQuery, usePostTodoCommentRTKMutation} = todortkquery\nexport default todortkquery"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}